import{b as _}from"./boardApi-BE8EFXNV.js";import{h as x}from"./moment-C5S46NFB.js";import{a as k,c as C,h as V,m as B,b as d,d as t,e as p,t as i,F as D,p as I,j as m,k as n,q as l,l as y,i as Y,o as f}from"./index-oxHWDz14.js";import"./index-NBdgnD-E.js";const h={class:"mt-5 text-end"},L={class:"table table-striped"},N={class:"my-5 d-flex"},R={class:"flex-grow-1 text-center"},j={__name:"BoardListPage",setup(A){const a=V(),b=Y(),r=k({}),v=C(()=>r.value.list),s=reactive({page:parseInt(a.query.page)||1,amount:parseInt(a.query.amount)||10}),q=async u=>{b.push({query:{page:u,amount:s.amount}})};B(a,async u=>{console.log("WATCH",a.query.page),s.page=parseInt(a.query.page),s.amount=parseInt(a.query.amount),await g()});const g=async()=>{try{r.value=await _.getList(),console.log(r.value)}catch(u){console.error("목록 로드 실패:",u)}};return g(),(u,e)=>{const c=y("router-link"),w=y("vue-awesome-paginate");return f(),d("div",null,[e[7]||(e[7]=t("h1",{class:"mb-3"},[t("i",{class:"fa-solid fa-paste"}),p(" 게시글 목록")],-1)),t("div",h,"(총 "+i(r.value.totalCount)+"건)",1),t("table",L,[e[1]||(e[1]=t("thead",null,[t("tr",null," ... ")],-1)),t("tbody",null,[(f(!0),d(D,null,I(v.value,o=>(f(),d("tr",{key:o.no},[t("td",null,i(o.no),1),t("td",null,[m(c,{to:{name:"board/detail",params:{no:o.no},query:l(a).query}},{default:n(()=>[p(i(o.title),1)]),_:2},1032,["to"])]),t("td",null,i(o.writer),1),t("td",null,i(l(x)(o.regDate).format("YYYY-MM-DD")),1)]))),128))])]),t("div",N,[t("div",R,[m(w,{"total-items":r.value.totalCount,"items-per-page":l(s).amount,"max-pages-shown":5,"show-ending-buttons":!0,modelValue:l(s).page,"onUpdate:modelValue":e[0]||(e[0]=o=>l(s).page=o),onClick:q},{"first-page-button":n(()=>e[2]||(e[2]=[t("i",{class:"fa-solid fa-backward-fast"},null,-1)])),"prev-button":n(()=>e[3]||(e[3]=[t("i",{class:"fa-solid fa-caret-left"},null,-1)])),"next-button":n(()=>e[4]||(e[4]=[t("i",{class:"fa-solid fa-caret-right"},null,-1)])),"last-page-button":n(()=>e[5]||(e[5]=[t("i",{class:"fa-solid fa-forward-fast"},null,-1)])),_:1},8,["total-items","items-per-page","modelValue"])]),t("div",null,[m(c,{to:{name:"board/create",query:l(a).query},class:"btn btn-primary"},{default:n(()=>e[6]||(e[6]=[t("i",{class:"fa-solid fa-pen-to-square"},null,-1),p(" 글 작성")])),_:1,__:[6]},8,["to"])])])])}}};export{j as default};
